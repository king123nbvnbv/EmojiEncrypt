<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¦×¤×™×Ÿ ××™××•×’'×™ ×“×•-×œ×©×•× ×™ ğŸŒ</title>
    <style>
        /* CSS Styling - ×“×•××” ×œ×§×•×“ ×”×§×•×“× ××š ××¢×˜ ×™×•×ª×¨ ×¨×—×‘ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8; 
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }

        .container {
            background-color: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 600px; /* ×”×’×“×œ×” ×§×œ×” ×©×œ ×”×¨×•×—×‘ */
            width: 100%;
        }

        h1 {
            color: #333;
            margin-bottom: 1rem;
        }

        textarea {
            width: 100%;
            height: 120px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            resize: none;
            box-sizing: border-box;
            margin-bottom: 15px;
        }

        button {
            background-color: #007bff; /* ×¦×‘×¢ ×›×—×•×œ × ×™×™×˜×¨×œ×™ */
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            transition: background 0.3s;
        }

        button:hover {
            background-color: #0056b3;
        }

        #result {
            margin-top: 20px;
            font-size: 2.2rem; 
            min-height: 50px;
            word-break: break-all;
            text-align: left; /* ×™×™×©×•×¨ ×œ×©×××œ ×œ×ª×•×¦××” ×›×“×™ ×œ×”×ª××™× ×œ××™××•×’'×™ */
            direction: ltr;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>××¦×¤×™×Ÿ ××™××•×’'×™ ×“×•-×œ×©×•× ×™ ğŸ˜ºğŸš€</h1>
        <p>×”×¦×¤×Ÿ ×˜×§×¡×˜ (×¢×‘×¨×™×ª ×•×× ×’×œ×™×ª) ×œ××™××•×’'×™ ×™×™×—×•×“×™×™×, ×›×•×œ×œ ×—×ª×•×œ×™× ×œ××•×ª×™×•×ª ×”×¢×‘×¨×™×•×ª.</p>
        
        <textarea id="inputText" placeholder="×”×§×œ×“ ×›××Ÿ ×˜×§×¡×˜ ×‘×¢×‘×¨×™×ª ××• ×‘×× ×’×œ×™×ª..."></textarea>
        
        <div>
            <button onclick="encryptText()">×”×¦×¤×Ÿ ×œ××™××•×’'×™! ğŸ”</button>
            <button onclick="decryptText()">×¤Ö·Ö¼×¢Ö²× Ö·×— ×œ×˜×§×¡×˜! ğŸ”“</button>
        </div>
        
        <div id="result"></div>
    </div>

    <script>
        // ×”××™×œ×•× ×™× ×”×’×“×•×œ×™× ×•×”××§×™×¤×™× ×©×œ× ×•
        let ENCRYPT_MAP = {};
        let DECRYPT_MAP = {};

        // 1. ×”×’×“×¨×ª ×”××¤×•×ª
        // ×¨×©×™××ª ×›×œ ×”×ª×•×•×™× ×©×¦×¨×™×š ×œ×›×¡×•×ª
        const ALL_CHARS = "××‘×’×“×”×•×–×—×˜×™×›×œ×× ×¡×¢×¤×¦×§×¨×©×ª××Ÿ×£×š×¥abcdefghijklmnopqrstuvwxyz0123456789.,!?'-/()&@#$ \n";

        // 2. ×¨×©×™××ª ×”××™××•×’'×™ ×”××•×¨×—×‘×ª (×›×“×™ ×œ×›×¡×•×ª ××ª ×›×œ ×”×ª×•×•×™× ×‘-1:1)
        const ALL_EMOJIS = [
            // ×—×ª×•×œ×™× (×œ×¢×‘×¨×™×ª)
            'ğŸ˜º', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ˜¼', 'ğŸ˜½', 'ğŸ™€', 'ğŸ˜¿', 'ğŸ˜¾', 'ğŸˆ', 'ğŸ¦', 'ğŸ¯', 'ğŸ†', 'ğŸ…', 'ğŸ¾', 'ğŸ±', 'ğŸ‘', 'ğŸª¿â€', 'ğŸ§¡', 'ğŸ¤', 'ğŸ¤', 'ğŸ–¤', 'ğŸ’›',
            // ×›×œ×‘×™× ×•×—×™×•×ª ××—×¨×•×ª
            'ğŸ¶', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼', 'ğŸ¨', 'ğŸ·', 'ğŸ¸', 'ğŸ™', 'ğŸ¦€', 'ğŸ¦', 'ğŸ ', 'ğŸ¬', 'ğŸ³', 'ğŸ¦†',
            // ××•×›×œ ×•×©×ª×™×”
            'ğŸ•', 'ğŸ”', 'ğŸŸ', 'ğŸ¦', 'ğŸ©', 'ğŸª', 'â˜•', 'ğŸµ', 'ğŸ¥‚', 'ğŸ¾',
            // ×›×œ×™ ×¨×›×‘ ×•××§×•××•×ª
            'ğŸš—', 'âœˆï¸', 'â›µ', 'ğŸš€', 'ğŸŸï¸', 'ğŸ«', 'ğŸ¦', 'ğŸ¥', 'ğŸ­', 'ğŸ°',
            // ×—×¤×¦×™× ×•×¡××œ×™×
            'ğŸ’¡', 'ğŸ’°', 'ğŸ”‘', 'ğŸ”¨', 'â˜ï¸', 'âŒš', 'ğŸ“¸', 'ğŸ“½ï¸', 'ğŸ’»', 'ğŸ–¥ï¸', 'ğŸ’¿', 'ğŸ’¾', 'ğŸ“–', 'ğŸ“', 'âœ‰ï¸',
            // ×¤×¨×—×™× ×•×˜×‘×¢
            'ğŸŒ·', 'ğŸŒ¹', 'ğŸŒ»', 'ğŸŒ', 'ğŸŒˆ', 'ğŸŒ§ï¸', 'â›ˆï¸', 'ğŸŒŠ',
            // ×¦×•×¨×•×ª ×•×¦×‘×¢×™×
            'ğŸ”´', 'ğŸŸ ', 'ğŸŸ¡', 'ğŸŸ¢', 'ğŸ”µ', 'ğŸŸ£', 'âš«', 'âšª', 'â­', 'âœ¨', 'âš¡', 'ğŸ”¥', 'ğŸ’§', 'ğŸ‰',
            // ×¡×™××•× ×™× ×•×¨×’×©×•×ª
            'âœ…', 'âŒ', 'â¤ï¸', 'ğŸ’¯', 'â“', 'â•', 'â—', 'ğŸ…¿ï¸', 'ğŸ†—', 'â¬†ï¸', 'â¬‡ï¸', 'â¬…ï¸', 'â¡ï¸',
            // ×¡×™××Ÿ ×œ×¨×•×•×—
            ' ' 
        ];

        // 3. ×”×’×“×¨×ª ×”××¤×•×ª
        function generateCypherMaps() {
            // ×× ×”××¤×•×ª ×›×‘×¨ × ×•×¦×¨×•, ××™×Ÿ ×¦×•×¨×š ×œ×™×¦×•×¨ ×©×•×‘
            if (Object.keys(ENCRYPT_MAP).length > 0) return; 

            // ×‘×“×™×§×ª ×‘×˜×™×—×•×ª: ×•×“× ×©×™×© ××¡×¤×™×§ ××™××•×’'×™ ×œ×›×œ ×”×ª×•×•×™×
            if (ALL_EMOJIS.length < ALL_CHARS.length) {
                console.error("×—×¡×¨×™× ××™××•×’'×™ ×œ×™×¦×™×¨×ª ××¤×ª 1:1. ×× × ×”×•×¡×£ ×¢×•×“ ××™××•×’'×™.");
                return;
            }

            // ×™×¦×™×¨×ª ××™×œ×•×Ÿ ×”×”×¦×¤× ×” ×•×”×¤×¢× ×•×—
            for (let i = 0; i < ALL_CHARS.length; i++) {
                const char = ALL_CHARS[i];
                const emoji = ALL_EMOJIS[i];

                ENCRYPT_MAP[char] = emoji;
                DECRYPT_MAP[emoji] = char;
            }
        }

        // --- ×¤×•× ×§×¦×™×” 1: ×”×¦×¤× ×” (Encrypt) ---
        function encryptText() {
            generateCypherMaps();
            const text = document.getElementById("inputText").value.toLowerCase(); // ×”××¨×” ×œ-lowercase ×›×“×™ ×œ×¤×©×˜ ××ª ×”××¤×”
            let encryptedText = "";

            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                // ×× ×”×ª×• ×§×™×™× ×‘××¤×ª ×”×”×¦×¤× ×”
                if (ENCRYPT_MAP[char]) {
                    encryptedText += ENCRYPT_MAP[char];
                } else {
                    // ×œ×›×œ ×ª×• ×©×œ× ×§×™×™× ×‘××¤×” (×œ××©×œ, ×ª×• ××™×•×—×“ ×©×œ× ×”×•×’×“×¨) × ×©×™× ×¡×™××Ÿ ×©××œ×”
                    encryptedText += 'âŒ'; 
                }
            }

            document.getElementById("result").innerText = encryptedText;
        }

		// --- ×¤×•× ×§×¦×™×” 2: ×¤×¢× ×•×— (Decrypt) ---
		function decryptText() {
			generateCypherMaps();
			const text = document.getElementById("inputText").value;
			let decryptedText = "";
			let i = 0;

			// Use a while loop to properly handle multi-character Unicode characters (surrogate pairs)
			while (i < text.length) {
				// Get the full Unicode character (accounting for surrogate pairs)
				const char = text.codePointAt(i);
				const charStr = String.fromCodePoint(char); // Convert it back to string

				// Check if the character exists in the DECRYPT_MAP
				if (DECRYPT_MAP[charStr]) {
					const originalChar = DECRYPT_MAP[charStr];

					// Handle final letters (if the character is a final letter, return the regular one)
					decryptedText += originalChar;
				} 
				// If the character is 'âŒ', it's an unknown character that was encrypted as such
				else if (charStr === 'âŒ') {
					decryptedText += '??'; 
				} 
				// If it's an emoji or character that doesn't exist in the map, we can keep it or handle it as needed
				else {
					decryptedText += charStr; 
				}

				// Move to the next character, adjusting for multi-byte characters
				i += charStr.length;
			}

			// Display the decrypted text in the result section
			document.getElementById("result").innerText = decryptedText;
		}


    </script>

</body>
</html>